<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>LegacyEnvironment (ImageJ Javadocs 2.0.0-SNAPSHOT API)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="LegacyEnvironment (ImageJ Javadocs 2.0.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":9,"i8":9,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LegacyEnvironment.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../net/imagej/patcher/LegacyClassLoader.html" title="class in net.imagej.patcher"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../net/imagej/patcher/LegacyHooks.html" title="class in net.imagej.patcher"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?net/imagej/patcher/LegacyEnvironment.html" target="_top">Frames</a></li>
<li><a href="LegacyEnvironment.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.imagej.patcher</div>
<h2 title="Class LegacyEnvironment" class="title">Class LegacyEnvironment</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>net.imagej.patcher.LegacyEnvironment</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">LegacyEnvironment</span>
extends <a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Encapsulates an ImageJ 1.x "instance".
 <p>
 This class is a partner to the <a href="../../../net/imagej/patcher/LegacyClassLoader.html" title="class in net.imagej.patcher"><code>LegacyClassLoader</code></a>, intended to make
 sure that the ImageJ 1.x contained in a given class loader is patched and can
 be accessed conveniently.
 </p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Johannes Schindelin</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#LegacyEnvironment-java.lang.ClassLoader-boolean-">LegacyEnvironment</a></span>(<a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang">ClassLoader</a>&nbsp;loader,
                 boolean&nbsp;headless)</code>
<div class="block">Constructs a new legacy environment.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#addPluginClasspath-java.lang.ClassLoader-">addPluginClasspath</a></span>(<a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang">ClassLoader</a>&nbsp;fromClassLoader)</code>
<div class="block">Adds the class path of a given <a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang"><code>ClassLoader</code></a> to the plugin class
 loader.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#addPluginClasspath-java.io.File...-">addPluginClasspath</a></span>(<a href="https://javadoc.scijava.org/Java8/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>...&nbsp;classpathEntries)</code>
<div class="block">Adds extra elements to the class path of ImageJ 1.x' plugin class loader.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#applyPatches--">applyPatches</a></span>()</code>
<div class="block">Applies the configuration patches.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#disableIJ1PluginDirs--">disableIJ1PluginDirs</a></span>()</code>
<div class="block">Disallows the encapsulated ImageJ 1.x from parsing the directories listed
 in <code>ij1.plugin.dirs</code>.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#disableInitializer--">disableInitializer</a></span>()</code>
<div class="block">Disables the execution of the <code>ij1.patcher.initializer</code>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang">ClassLoader</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#getClassLoader--">getClassLoader</a></span>()</code>
<div class="block">Gets the class loader containing the ImageJ 1.x classes used in this legacy
 environment.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="https://javadoc.scijava.org/Java8/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#getMenuStructure--">getMenuStructure</a></span>()</code>
<div class="block">Gets the ImageJ 1.x menu structure as a map</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static <a href="../../../net/imagej/patcher/LegacyEnvironment.html" title="class in net.imagej.patcher">LegacyEnvironment</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#getPatchedImageJ1--">getPatchedImageJ1</a></span>()</code>
<div class="block">Launches a fully-patched, self-contained ImageJ 1.x.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#isImageJ1Initialized-java.lang.ClassLoader-">isImageJ1Initialized</a></span>(<a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang">ClassLoader</a>&nbsp;loader)</code>
<div class="block">Determines whether there is already an ImageJ 1.x instance.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#main-java.lang.String...-">main</a></span>(<a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>...&nbsp;args)</code>
<div class="block">Runs <code>ImageJ.main(args)</code> in the legacy environment.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#newImageJ1-boolean-">newImageJ1</a></span>(boolean&nbsp;hidden)</code>
<div class="block">Initializes a new ImageJ 1.x instance.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#noPluginClassLoader--">noPluginClassLoader</a></span>()</code>
<div class="block">Forces ImageJ 1.x to use the same <a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang"><code>ClassLoader</code></a> for plugins as for
 ImageJ 1.x itself.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#run-java.lang.String-java.lang.String-">run</a></span>(<a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;command,
   <a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;options)</code>
<div class="block">Runs <code>IJ.run(command, options)</code> in the legacy environment.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#runMacro-java.lang.String-java.lang.String-">runMacro</a></span>(<a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;macro,
        <a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;arg)</code>
<div class="block">Runs <code>IJ.runMacro(macro, arg)</code> in the legacy environment.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code><a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#runPlugIn-java.lang.String-java.lang.String-">runPlugIn</a></span>(<a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;className,
         <a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;arg)</code>
<div class="block">Runs <code>IJ.runPlugIn(className, arg)</code> in the legacy environment.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#setMacroOptions-java.lang.String-">setMacroOptions</a></span>(<a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;options)</code>
<div class="block">Sets the macro options.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/imagej/patcher/LegacyEnvironment.html#suppressIJ1ScriptDiscovery--">suppressIJ1ScriptDiscovery</a></span>()</code>
<div class="block">Disallows ImageJ 1.x from discovering macros and scripts to put into the
 menu structure.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="LegacyEnvironment-java.lang.ClassLoader-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LegacyEnvironment</h4>
<pre>public&nbsp;LegacyEnvironment(<a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang">ClassLoader</a>&nbsp;loader,
                         boolean&nbsp;headless)
                  throws <a href="https://javadoc.scijava.org/Java8/java/lang/ClassNotFoundException.html?is-external=true" title="class or interface in java.lang">ClassNotFoundException</a></pre>
<div class="block">Constructs a new legacy environment.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>loader</code> - the <a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang"><code>ClassLoader</code></a> to use for loading the (patched)
          ImageJ 1.x classes; if <code>null</code>, a <a href="../../../net/imagej/patcher/LegacyClassLoader.html" title="class in net.imagej.patcher"><code>LegacyClassLoader</code></a>
          is constructed.</dd>
<dd><code>headless</code> - whether to patch in support for headless operation
          (compatible only with "well-behaved" plugins, i.e. plugins that do
          not use graphical components directly)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://javadoc.scijava.org/Java8/java/lang/ClassNotFoundException.html?is-external=true" title="class or interface in java.lang">ClassNotFoundException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="disableIJ1PluginDirs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disableIJ1PluginDirs</h4>
<pre>public&nbsp;void&nbsp;disableIJ1PluginDirs()</pre>
<div class="block">Disallows the encapsulated ImageJ 1.x from parsing the directories listed
 in <code>ij1.plugin.dirs</code>.
 <p>
 The patched ImageJ 1.x has a feature where it interprets the value of the
 <code>ij1.plugin.dirs</code> system property as a list of directories in which
 to discover plugins in addition to <code>&lt;imagej.dir&gt;/plugins</code>. In the
 case that the <code>ij1.plugin.dirs</code> property is not set, the directory
 <code>$HOME/.plugins/</code> -- if it exists -- is inspected instead.
 </p>
 <p>
 This is a convenient behavior when the user starts up ImageJ 1.x as an
 application, but it is less than desirable when running in a cluster or
 from unit tests. For such use cases, this method needs to be called in
 order to disable additional plugin directories.
 </p></div>
</li>
</ul>
<a name="disableInitializer--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disableInitializer</h4>
<pre>public&nbsp;void&nbsp;disableInitializer()</pre>
<div class="block">Disables the execution of the <code>ij1.patcher.initializer</code>.
 <p>
 A fully patched ImageJ 1.x will allow an initializer class implementing the
 <a href="https://javadoc.scijava.org/Java8/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a> interface (and discovered via ImageJ 1.x' own
 <code>PluginClassLoader</code>) to run just after ImageJ 1.x was
 initialized. If the system property <code>ij1.patcher.initializer</code> is
 unset, it defaults to ImageJ2's <code>LegacyInitializer</code> class.
 </p>
 <p>
 Users of the LegacyEnvironment class can call this method to disable that
 behavior.
 </p></div>
</li>
</ul>
<a name="noPluginClassLoader--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>noPluginClassLoader</h4>
<pre>public&nbsp;void&nbsp;noPluginClassLoader()</pre>
<div class="block">Forces ImageJ 1.x to use the same <a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang"><code>ClassLoader</code></a> for plugins as for
 ImageJ 1.x itself.
 <p>
 ImageJ 1.x has a command <i>Help&gt;Refresh Menus</i> that allows users to
 ask ImageJ 1.x to parse the <code>plugins/</code> directory for new, or
 modified, plugins, and to remove menu labels corresponding to plugins whose
 files were deleted while ImageJ 1.x is running. The intended use case is to
 support developing ImageJ 1.x plugins without having to restart ImageJ 1.x
 all the time, just to test new iterations of the same plugin.
 </p>
 <p>
 To support this, a <code>PluginClassLoader</code> that loads the plugin
 classes is instantiated at initialization, and whenever the user calls
 <i>Refresh Menus</i>, essentially releasing the old <a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang"><code>ClassLoader</code></a>.
 This is a fragile solution, as no measures are taken to ensure that the
 classes loaded by the previous <code>PluginClassLoader</code> are no
 longer used, but it works most of the time.
 </p>
 <p>
 With ImageJ2 being developed in a modular manner, it is no longer easy to
 have one class loader containing only the ImageJ classes and another class
 loader containing all the plugins. Therefore, this method is required to be
 able to force ImageJ 1.x to reuse the same class loader for plugins as for
 ImageJ classes, implying that the <i>Refresh Menus</i> command needs to be
 disabled.
 </p>
 <p>
 Since the advent of powerful Integrated Development Environments such as
 Netbeans and Eclipse, it is preferable to develop even ImageJ 1.x plugins
 in such environments instead of using a text editor to edit the
 <code>.java</code> source, then running <code>javac</code> from the command-line,
 calling <i>Refresh Menus</i> and finally repeating the manual test
 procedure, anyway.
 </p></div>
</li>
</ul>
<a name="suppressIJ1ScriptDiscovery--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>suppressIJ1ScriptDiscovery</h4>
<pre>public&nbsp;void&nbsp;suppressIJ1ScriptDiscovery()</pre>
<div class="block">Disallows ImageJ 1.x from discovering macros and scripts to put into the
 menu structure.
 <p>
 Some callers -- most notably ImageJ2 and Fiji -- want to improve on the
 scripting support, which unfortunately implies overriding the
 non-extensible script and macro handling of ImageJ 1.x.
 </p></div>
</li>
</ul>
<a name="addPluginClasspath-java.lang.ClassLoader-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addPluginClasspath</h4>
<pre>public&nbsp;void&nbsp;addPluginClasspath(<a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang">ClassLoader</a>&nbsp;fromClassLoader)</pre>
<div class="block">Adds the class path of a given <a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang"><code>ClassLoader</code></a> to the plugin class
 loader.
 <p>
 This method is intended to be used in unit tests as well as interactive
 debugging from inside an Integrated Development Environment where the
 plugin's classes are not available inside a <code>.jar</code> file.
 </p>
 <p>
 At the moment, the only supported parameters are <a href="https://javadoc.scijava.org/Java8/java/net/URLClassLoader.html?is-external=true" title="class or interface in java.net"><code>URLClassLoader</code></a>s.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fromClassLoader</code> - the class path donor</dd>
</dl>
</li>
</ul>
<a name="addPluginClasspath-java.io.File...-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addPluginClasspath</h4>
<pre>public&nbsp;void&nbsp;addPluginClasspath(<a href="https://javadoc.scijava.org/Java8/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>...&nbsp;classpathEntries)</pre>
<div class="block">Adds extra elements to the class path of ImageJ 1.x' plugin class loader.
 <p>
 The typical use case for a <a href="../../../net/imagej/patcher/LegacyEnvironment.html" title="class in net.imagej.patcher"><code>LegacyEnvironment</code></a> is to run specific
 plugins in an encapsulated environment. However, in the case of multiple
 one wants to use multiple legacy environments with separate sets of plugins
 enabled, it becomes impractical to pass the location of the plugins'
 <code>.jar</code> files via the <code>plugins.dir</code> system property (because of
 threading issues).
 </p>
 <p>
 In other cases, the plugins' <code>.jar</code> files are not located in a single
 directory, or worse: they might be contained in a directory among
 <code>.jar</code> files one might <i>not</i> want to add to the plugin class
 loader's class path.
 </p>
 <p>
 This method addresses that need by allowing to add individual <code>.jar</code>
 files to the class path of the plugin class loader and ensuring that their
 <code>plugins.config</code> files are parsed.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>classpathEntries</code> - the class path entries containing ImageJ 1.x
          plugins</dd>
</dl>
</li>
</ul>
<a name="setMacroOptions-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMacroOptions</h4>
<pre>public&nbsp;void&nbsp;setMacroOptions(<a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;options)</pre>
<div class="block">Sets the macro options.
 <p>
 Both <a href="../../../net/imagej/patcher/LegacyEnvironment.html#run-java.lang.String-java.lang.String-"><code>run(String, String)</code></a> and <a href="../../../net/imagej/patcher/LegacyEnvironment.html#runMacro-java.lang.String-java.lang.String-"><code>runMacro(String, String)</code></a>
 take an argument that is typically recorded by the macro recorder. For
 <a href="../../../net/imagej/patcher/LegacyEnvironment.html#runPlugIn-java.lang.String-java.lang.String-"><code>runPlugIn(String, String)</code></a>, however, only the <code>arg</code> parameter
 that is to be passed to the plugins <code>run()</code> or <code>setup()</code> method
 can be specified. For those use cases where one wants to call a plugin
 class directly, but still provide macro options, this method is the
 solution.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>options</code> - the macro options to use for the next call to
          <a href="../../../net/imagej/patcher/LegacyEnvironment.html#runPlugIn-java.lang.String-java.lang.String-"><code>runPlugIn(String, String)</code></a></dd>
</dl>
</li>
</ul>
<a name="run-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run(<a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;command,
                <a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;options)</pre>
<div class="block">Runs <code>IJ.run(command, options)</code> in the legacy environment.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>command</code> - the command to run</dd>
<dd><code>options</code> - the options to pass to the command</dd>
</dl>
</li>
</ul>
<a name="runMacro-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runMacro</h4>
<pre>public&nbsp;void&nbsp;runMacro(<a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;macro,
                     <a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;arg)</pre>
<div class="block">Runs <code>IJ.runMacro(macro, arg)</code> in the legacy environment.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>macro</code> - the macro code to run</dd>
<dd><code>arg</code> - an optional argument (which can be retrieved in the macro code
          via <code>getArgument()</code>)</dd>
</dl>
</li>
</ul>
<a name="runPlugIn-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runPlugIn</h4>
<pre>public&nbsp;<a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;runPlugIn(<a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;className,
                        <a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;arg)</pre>
<div class="block">Runs <code>IJ.runPlugIn(className, arg)</code> in the legacy environment.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>className</code> - the plugin class to run</dd>
<dd><code>arg</code> - an optional argument (which get passed to the <code>run()</code> or
          <code>setup()</code> method of the plugin)</dd>
</dl>
</li>
</ul>
<a name="main-java.lang.String...-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>main</h4>
<pre>public&nbsp;void&nbsp;main(<a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>...&nbsp;args)</pre>
<div class="block">Runs <code>ImageJ.main(args)</code> in the legacy environment.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>args</code> - the arguments to pass to the main() method</dd>
</dl>
</li>
</ul>
<a name="newImageJ1-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newImageJ1</h4>
<pre>public&nbsp;<a href="https://javadoc.scijava.org/Java8/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;newImageJ1(boolean&nbsp;hidden)</pre>
<div class="block">Initializes a new ImageJ 1.x instance.
 <p>
 This method starts up a fully-patched ImageJ 1.x, optionally hidden (in
 <code>headless</code> mode, it <b>must</b> be hidden).
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hidden</code> - whether to hide the ImageJ 1.x main window upon startup</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the instance of the <code>ImageJ</code> class, or <code>null</code> in
         headless mode</dd>
</dl>
</li>
</ul>
<a name="applyPatches--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>applyPatches</h4>
<pre>public&nbsp;void&nbsp;applyPatches()</pre>
<div class="block">Applies the configuration patches.
 <p>
 After calling methods to configure the current <a href="../../../net/imagej/patcher/LegacyEnvironment.html" title="class in net.imagej.patcher"><code>LegacyEnvironment</code></a>
 (e.g. <a href="../../../net/imagej/patcher/LegacyEnvironment.html#disableIJ1PluginDirs--"><code>disableIJ1PluginDirs()</code></a>), the final step before using the
 encapsulated ImageJ 1.x is to apply the configuring patches to the
 <a href="../../../net/imagej/patcher/EssentialLegacyHooks.html" title="class in net.imagej.patcher"><code>EssentialLegacyHooks</code></a> class. This method needs to be called if the
 configuration has to be finalized, but ImageJ 1.x is not run right away,
 e.g. to prepare for third-party libraries using ImageJ 1.x classes
 directly.
 </p></div>
</li>
</ul>
<a name="getClassLoader--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getClassLoader</h4>
<pre>public&nbsp;<a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang">ClassLoader</a>&nbsp;getClassLoader()</pre>
<div class="block">Gets the class loader containing the ImageJ 1.x classes used in this legacy
 environment.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the class loader</dd>
</dl>
</li>
</ul>
<a name="getMenuStructure--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMenuStructure</h4>
<pre>public&nbsp;<a href="https://javadoc.scijava.org/Java8/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="https://javadoc.scijava.org/Java8/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;getMenuStructure()</pre>
<div class="block">Gets the ImageJ 1.x menu structure as a map</div>
</li>
</ul>
<a name="getPatchedImageJ1--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPatchedImageJ1</h4>
<pre>public static&nbsp;<a href="../../../net/imagej/patcher/LegacyEnvironment.html" title="class in net.imagej.patcher">LegacyEnvironment</a>&nbsp;getPatchedImageJ1()
                                           throws <a href="https://javadoc.scijava.org/Java8/java/lang/ClassNotFoundException.html?is-external=true" title="class or interface in java.lang">ClassNotFoundException</a></pre>
<div class="block">Launches a fully-patched, self-contained ImageJ 1.x.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://javadoc.scijava.org/Java8/java/lang/ClassNotFoundException.html?is-external=true" title="class or interface in java.lang">ClassNotFoundException</a></code></dd>
</dl>
</li>
</ul>
<a name="isImageJ1Initialized-java.lang.ClassLoader-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isImageJ1Initialized</h4>
<pre>public static&nbsp;boolean&nbsp;isImageJ1Initialized(<a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang">ClassLoader</a>&nbsp;loader)</pre>
<div class="block">Determines whether there is already an ImageJ 1.x instance.
 <p>
 In contrast to <code>IJ.getInstance()</code>, this method avoids loading any
 ImageJ 1.x class, and is therefore suitable for testing whether a
 <a href="../../../net/imagej/patcher/LegacyEnvironment.html" title="class in net.imagej.patcher"><code>LegacyEnvironment</code></a> needs to be created when the caller wants the
 classes to be patched in its own <a href="https://javadoc.scijava.org/Java8/java/lang/ClassLoader.html?is-external=true" title="class or interface in java.lang"><code>ClassLoader</code></a>.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>loader</code> - the class loader in which to look for the ImageJ 1.x instance</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if there is an initialized instance</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LegacyEnvironment.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../net/imagej/patcher/LegacyClassLoader.html" title="class in net.imagej.patcher"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../net/imagej/patcher/LegacyHooks.html" title="class in net.imagej.patcher"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?net/imagej/patcher/LegacyEnvironment.html" target="_top">Frames</a></li>
<li><a href="LegacyEnvironment.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2014&#x2013;2020 <a href="https://imagej.net/">ImageJ</a>. All rights reserved.</small></p>
</body>
</html>
